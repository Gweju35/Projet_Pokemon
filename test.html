<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokémon Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
        }

        .pokemon {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .pokemon h2 {
            margin-top: 0;
        }
    </style>
</head>
<body>
    <h1>Liste des Pokémons</h1>
    <div id="pokemon-list"></div>

    <script src="pokemons.js"></script>
    <script src="pokemon_types.js"></script>
    <script src="type_effectiveness.js"></script>
    <script src="pokemon_moves.js"></script>
    <script src="charged_moves.js"></script>
    <script>
        // Votre code JavaScript
        // Insérez le contenu du script.js ici
        
        // Début du script.js

        class Pokemon {
            constructor(pokemonData) {
                this.id = pokemonData.pokemon_id;
                this.name = pokemonData.pokemon_name;
                this.attack = pokemonData.base_attack;
                this.defense = pokemonData.base_defense;
                this.stamina = pokemonData.base_stamina;
                this.form = pokemonData.form;
                this.types = [];
                this.attacks = [];
            }

            addType(type) {
                this.types.push(type);
            }

            addAttack(attack) {
                this.attacks.push(attack);
            }

            toString() {
                return `Pokemon: ${this.name} (${this.form}) - ID: ${this.id}`;
            }
        }

        class Type {
            constructor(typeData) {
                this.name = typeData.form;
                this.effectiveness = {};
                if (this.name === "Normal") {
                    this.loadEffectiveness(typeData.type);
                }
            }

            loadEffectiveness(types) {
                for (const typeName of types) {
                    if (type_effectiveness[typeName]) {
                        this.effectiveness[typeName] = type_effectiveness[typeName];
                    }
                }
            }

            toString() {
                return `Type: ${this.name}`;
            }
        }

        class Attack {
            constructor(attackData) {
                this.id = attackData.move_id;
                this.name = attackData.name;
                this.type = attackData.type;
                this.power = attackData.power;
                this.duration = attackData.duration;
                this.criticalChance = attackData.critical_chance;
                this.staminaLossScaler = attackData.stamina_loss_scaler;
            }

            toString() {
                return `Attack: ${this.name} - Type: ${this.type}`;
            }
        }

        function import_pokemon() {
            let all_pokemons = {};

            for (const pokemonData of pokemon) {
                if (pokemonData.form === "Normal") {
                    let pokemonObj = new Pokemon(pokemonData);
                    all_pokemons[pokemonObj.id] = pokemonObj;
                }
            }

            for (const pokemonTypeData of pokemon_types) {
                if (pokemonTypeData.form === "Normal" && all_pokemons[pokemonTypeData.pokemon_id]) {
                    let pokemon = all_pokemons[pokemonTypeData.pokemon_id];
                    let type = new Type(pokemonTypeData);
                    pokemon.addType(type);
                }
            }

            for (const moveData of pokemon_moves) {
                if (moveData.form === "Normal" && all_pokemons[moveData.pokemon_id]) {
                    let pokemon = all_pokemons[moveData.pokemon_id];
                    for (const attackName of moveData.fast_moves.concat(moveData.charged_moves)) {
                        let attackData = charged_moves.find(attack => attack.name === attackName);
                        if (attackData) {
                            let attack = new Attack(attackData);
                            pokemon.addAttack(attack);
                        }
                    }
                }
            }

            return all_pokemons;
        }

        // Fin du script.js

        document.addEventListener('DOMContentLoaded', function() {
            const pokemonList = document.getElementById('pokemon-list');
            
            const allPokemons = import_pokemon();
            
            for (const pokemonId in allPokemons) {
                const pokemon = allPokemons[pokemonId];
                const pokemonDiv = document.createElement('div');
                pokemonDiv.classList.add('pokemon');
                pokemonDiv.innerHTML = `
                    <h2>${pokemon.name} (${pokemon.form})</h2>
                    <p>ID: ${pokemon.id}</p>
                    <p>Attaque: ${pokemon.attack}</p>
                    <p>Défense: ${pokemon.defense}</p>
                    <p>Endurance: ${pokemon.stamina}</p>
                    <p>Types:</p>
                    <ul>
                        ${pokemon.types.map(type => `<li>${type.name}</li>`).join('')}
                    </ul>
                    <p>Attaques:</p>
                    <ul>
                        ${pokemon.attacks.map(attack => `<li>${attack.name} (Type: ${attack.type})</li>`).join('')}
                    </ul>
                `;
                pokemonList.appendChild(pokemonDiv);
            }
        });
    </script>
</body>
</html>
