<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebApp Pokemon</title>
    <script src="./JSON/pokemons.js" defer></script>
    <script src="./JSON/pokemon.js" defer></script>
    <script src="./JSON/type_effectiveness.js" defer></script>
    <script src="./JSON/pokemon_type.js" defer></script>
    <script src="./JSON/type.js" defer></script>
</head>

<body>
    <ul id="pokemonList"></ul> <!-- Liste des Pokémon -->
    <ul id="typeList"></ul> <!-- Liste des types -->
    <div id="types-list"></div> <!-- Liste des types + efficacité -->


    <script>
        window.onload = function () {

            /* Liste des types + efficacité */
            Type.import_types(pokemon_types, type_effectiveness);
            const typesList = document.getElementById("types-list");
            typesList.innerHTML = ""; // Efface le contenu précédent
            for (const typeName in Type.all_types) {
                const type = Type.all_types[typeName];
                const typeElement = document.createElement("div");
                typeElement.innerHTML = `<strong>${type.name}</strong><br>Efficacités: ${JSON.stringify(type.effectiveness)}`;
                typesList.appendChild(typeElement);
            }


            /* Liste des Pokémon */
            const all_pokemons = Pokemon.import_pokemon(pokemon);
            console.log(all_pokemons);
            const pokemonList = document.getElementById("pokemonList");
            for (const pokemonId in all_pokemons) {
                all_pokemons[pokemonId].forEach(pokemon => {
                    const li = document.createElement("li");
                    li.textContent = pokemon.toString();
                    pokemonList.appendChild(li);
                });
            }

            /* Liste des types */
            const all_types = Type.import_types(pokemon_types, type_effectiveness);
            const typeList = document.getElementById("typeList");
            for (const typeName in all_types) {
                const type = all_types[typeName];
                const li = document.createElement("li");
                li.textContent = type.toString();
                typeList.appendChild(li);
            }
        }
    </script>

</body>

</html>